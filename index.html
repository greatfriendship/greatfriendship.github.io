<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de Amigos</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <div class="settings">
        <div class="theme-switch">
            <label>
                <input type="checkbox" id="themeToggle">
                Modo Escuro
            </label>
        </div>
        <div class="language-switch">
            <select id="langSelect">
                <option value="pt">Português</option>
                <option value="en">English</option>
            </select>
        </div>
    </div>

    <h1>Lista de Amigos</h1>

    <form id="friendForm" class="card-form">
        <input type="text" id="name" placeholder="Nome" required>
        <input type="number" id="age" placeholder="Idade" required>
        <input type="text" id="status" placeholder="Status" required>
        <input type="url" id="img" placeholder="URL da imagem" required>
        <button type="submit">Adicionar</button>
    </form>

    <div class="buttons">
        <button id="exportBtn">Exportar Lista</button>
        <input type="file" id="importFile" accept=".json" hidden>
        <button id="importBtn">Importar Lista</button>
    </div>

    <div class="cards-container" id="cardsContainer"></div>
</div>

<script>
const form = document.getElementById('friendForm');
const container = document.getElementById('cardsContainer');
const exportBtn = document.getElementById('exportBtn');
const importBtn = document.getElementById('importBtn');
const importFile = document.getElementById('importFile');
const themeToggle = document.getElementById('themeToggle');
const langSelect = document.getElementById('langSelect');

let friends = JSON.parse(localStorage.getItem('friends')) || [];

// ===== Tema =====
const savedTheme = localStorage.getItem('theme') || 'light';
document.body.classList.add(savedTheme);
themeToggle.checked = savedTheme === 'dark';
themeToggle.addEventListener('change', () => {
    const theme = themeToggle.checked ? 'dark' : 'light';
    document.body.classList.remove('light','dark');
    document.body.classList.add(theme);
    localStorage.setItem('theme', theme);
});

// ===== Idioma =====
const texts = {
    pt: {
        title: "Lista de Amigos",
        name: "Nome",
        age: "Idade",
        status: "Status",
        img: "URL da imagem",
        addBtn: "Adicionar",
        exportBtn: "Exportar Lista",
        importBtn: "Importar Lista",
        removeBtn: "Remover"
    },
    en: {
        title: "Friends List",
        name: "Name",
        age: "Age",
        status: "Status",
        img: "Image URL",
        addBtn: "Add",
        exportBtn: "Export List",
        importBtn: "Import List",
        removeBtn: "Remove"
    }
};

const savedLang = localStorage.getItem('lang') || 'pt';
langSelect.value = savedLang;
updateLanguage(savedLang);

langSelect.addEventListener('change', () => {
    const lang = langSelect.value;
    localStorage.setItem('lang', lang);
    updateLanguage(lang);
});

function updateLanguage(lang){
    const t = texts[lang];
    document.querySelector('h1').textContent = t.title;
    document.getElementById('name').placeholder = t.name;
    document.getElementById('age').placeholder = t.age;
    document.getElementById('status').placeholder = t.status;
    document.getElementById('img').placeholder = t.img;
    document.querySelector('#friendForm button').textContent = t.addBtn;
    document.getElementById('exportBtn').textContent = t.exportBtn;
    document.getElementById('importBtn').textContent = t.importBtn;
    renderCards();
}

// ===== Renderizar cards =====
function renderCards(){
    container.innerHTML = '';
    const lang = langSelect.value;
    friends.forEach((friend, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${friend.img}" alt="${friend.name}">
            <h2>${friend.name}</h2>
            <p>${texts[lang].age}: ${friend.age}</p>
            <p>${texts[lang].status}: ${friend.status}</p>
            <button class="removeBtn" data-index="${index}">${texts[lang].removeBtn}</button>
        `;
        container.appendChild(card);
    });

    document.querySelectorAll('.removeBtn').forEach(btn => {
        btn.addEventListener('click', e => {
            const idx = e.target.dataset.index;
            friends.splice(idx, 1);
            localStorage.setItem('friends', JSON.stringify(friends));
            renderCards();
        });
    });
}

// ===== Formulário =====
form.addEventListener('submit', e => {
    e.preventDefault();
    const friend = {
        name: document.getElementById('name').value,
        age: document.getElementById('age').value,
        status: document.getElementById('status').value,
        img: document.getElementById('img').value
    };
    friends.push(friend);
    localStorage.setItem('friends', JSON.stringify(friends));
    form.reset();
    renderCards();
});

// ===== Export =====
exportBtn.addEventListener('click', () => {
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(friends, null, 2));
    const dlAnchor = document.createElement('a');
    dlAnchor.setAttribute("href", dataStr);
    dlAnchor.setAttribute("download", "friends.json");
    dlAnchor.click();
});

// ===== Import =====
importBtn.addEventListener('click', () => importFile.click());

importFile.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = e => {
        try {
            friends = JSON.parse(e.target.result);
            localStorage.setItem('friends', JSON.stringify(friends));
            renderCards();
        } catch (err) {
            alert('Arquivo inválido');
        }
    };
    reader.readAsText(file);
});

// Inicializar
renderCards();
</script>
</body>
</html>
